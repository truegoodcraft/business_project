<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>BUS Core</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="icon" type="image/svg+xml" href="/ui/favicon.svg" />
  <link rel="stylesheet" href="/ui/css/app.css">
  <style>
    :root { --bg:#1a1a1a; --fg:#eee; --accent:#0a84ff; --sidebar:#222; }
    *{box-sizing:border-box}
    body{margin:0;font:14px/1.5 system-ui,Segoe UI,Arial;background:var(--bg);color:var(--fg);display:flex;height:100vh}
    #sidebar{width:200px;background:var(--sidebar);padding:16px 0;border-right:1px solid #333}
    #sidebar h1{margin:0 0 16px 16px;font-size:14px;color:#aaa}
    .tab{padding:10px 16px;cursor:pointer;border-left:4px solid transparent}
    .tab.active{background:#333;border-left-color:var(--accent);font-weight:600}
    .tab:hover:not(.active){background:#2a2a2a}
    .nav-group{display:none;flex-direction:column;padding-left:16px;gap:4px;margin-top:4px}
    .nav-group.open{display:flex}
    .nav-group .nav-item{padding:8px 16px;border-left:4px solid transparent;color:inherit;text-decoration:none;display:block;border-radius:4px}
    .nav-group .nav-item:hover{background:#2a2a2a}
    .nav-group .nav-item.nav-subitem{font-size:13px;color:#ccc}
    #main{flex:1;padding:20px;overflow:auto}
    .card{background:#242424;padding:16px;border-radius:8px;margin-bottom:16px}
    .card h2{margin:0 0 8px;color:var(--accent)}
    button{background:var(--accent);color:#fff;border:none;padding:8px 12px;border-radius:6px;cursor:pointer}
    button:hover{opacity:.9}
    pre{background:#111;padding:12px;border-radius:6px;overflow:auto;font-size:12px}
    #contacts-modal.hidden{display:none}
    #contacts-modal.open{display:flex}
    #contacts-modal{position:fixed;inset:0;display:flex;align-items:center;justify-content:center;background:transparent}
    #contacts-modal .modal-backdrop{position:absolute;inset:0;background:rgba(0,0,0,0.5)}
    #contacts-modal .modal-dialog{position:relative;z-index:1}
  </style>
</head>
<body>
  <nav id="sidebar">
    <h1>BUS Core</h1>
    <div class="tab active" data-tab="writes">Writes</div>
    <div class="tab" data-tab="tools">Tools</div>
    <div class="nav-group" data-group="tools">
      <!-- Contacts under Tools -->
      <a href="#/tools/contacts" class="tab nav-item nav-subitem" data-tab="tools-contacts" data-group="tools">
        <span>Contacts</span>
      </a>
    </div>
    <div class="tab" data-tab="dev">Dev</div>
  </nav>
  <main id="main">
    <div id="app"></div>
  </main>

  <div id="contacts-modal"
       data-role="contacts-modal"
       role="dialog"
       aria-modal="true"
       aria-labelledby="contacts-modal-title"
       class="modal hidden">
    <div class="modal-backdrop" aria-hidden="true"></div>
    <div class="modal-dialog modal-content">
      <header class="modal-header">
        <h2 id="contacts-modal-title">Add Contact</h2>
      </header>

      <form data-role="contacts-form" class="modal-body">
        <div class="field">
          <label for="contact-name">Name</label>
          <input id="contact-name" name="name" type="text" required />
        </div>

        <div class="field">
          <label for="contact-type">Type</label>
          <select id="contact-type" name="type" required>
            <option value="">— Select —</option>
            <option value="vendor">Vendor</option>
            <option value="customer">Customer</option>
          </select>
        </div>

        <div class="field">
          <label for="contact-email">Email</label>
          <input id="contact-email" name="email" type="email" />
        </div>

        <div class="field" data-visible-when="vendor">
          <label for="contact-material">Material</label>
          <input id="contact-material" name="material" type="text" />
        </div>

        <div class="field">
          <label for="contact-leadtime">Lead time (days)</label>
          <input id="contact-leadtime" name="lead_time_days" type="number" inputmode="numeric" />
        </div>

        <div class="field">
          <label for="contact-notes">Notes</label>
          <textarea id="contact-notes" name="notes"></textarea>
        </div>

        <footer class="modal-footer">
          <button type="button" data-action="close-contacts-modal">Cancel</button>
          <button type="submit" data-role="contacts-save">Save</button>
        </footer>
      </form>
    </div>
  </div>

  <script type="module" src="/ui/app.js?v=pingfix2"></script>
</body>
</html>
